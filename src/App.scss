// fonts
@import url('https://fonts.googleapis.com/css?family=IBM+Plex+Mono:300,400,500');
@import url('https://fonts.googleapis.com/css?family=IBM+Plex+Sans:300,400,500,600');
@import url('https://fonts.googleapis.com/css?family=IBM+Plex+Serif:300,400,500');

// animation
$animation-rate: 0.75s;
$animation-rate-fast: 0.2s;

// color
$base-dark: #111010;
$base-light: #F6F5F1;

// RESPONSIVE
$break-small: 900px;


// setup
* {
  box-sizing: border-box;
}
ul, li {
  margin: 0;
  padding: 0;
}
body {
  padding: 0;
  margin: 0;
  text-rendering: optimizeLegibility;
  background-color: $base-dark;
  font-family: 'IBM Plex Sans', sans-serif;
}

// loading
// .loader {
//   position: absolute;
//   top: calc(50% - 60px);
//   left: calc(50% - 80px);
//   text-align: center;
//   // padding: 1em;
//   display: block;
//   // vertical-align: top;
//   // margin: -40px 0px;
//   font-family: 'IBM Plex Sans', sans-serif;
//   font-size: 60px;
//   border-radius: 40px;
//   opacity: 0.7;
//   background-color: #1f1f1f;
//   color: #999;
//   width: 80px;
//   height:80px;
//   animation: pulse1 2s infinite ease-in-out;
//   span.one {
//     position: absolute;
//     display: block;
//     background-color: #333;
//     top: calc(50% - 25px);
//     left: calc(50% - 25px);
//     width: 50px;
//     height:50px;
//     border-radius: 40px;
//     z-index: 100;
//     animation: pulse2 2s infinite ease-in-out;
//   }
//   span.two {
//     position: absolute;
//     display: block;
//     background-color: goldenrod;
//     top: calc(50% - 10px);
//     left: calc(50% - 10px);
//     width: 20px;
//     height:20px;
//     border-radius: 40px;
//     z-index: 100;
//     animation: pulse3 2s infinite ease-in-out;
//   }
// }

// TESTING SCROLLAMA
.step {
  display: block;
  width: 100%;
  height: 700px;
  text-align: center;
  margin: 900px 0;
}
.intro {
  width: 100%;
  height: 1200px;
  background: pink;
  color: blue;
  font-size: 60px;
  padding: 200px 0;
  text-align: center;
}

// page layout
// .main {
//   // display: grid;
// 	// grid-template-rows: 80px auto;
// 	// grid-template-columns: 485px 1fr;
// 	// height: 100vh;
//   display: flex;
//   height: 1280px;
//   transition:all $animation-rate ease;
//   &.expand-year-plots {
//     // grid-template-columns: 1010px 1fr;
//     transition: all 3s ease 3s;
//   }
// }
// .year-plot-group {
//   padding-left: 80px;
//   flex-basis: 45%;
// }
// .expand-year-plots .most-seen-read {
//   display: block;
//   opacity: 1;
//   transition:all 3s ease 3s;
// }
// .media-list-panel {
//   flex-basis: 55%;
//   align-self: flex-start;
//   height: 1280px;
//   background: #444;
//   overflow: auto;
//   transition:all $animation-rate ease;
//   opacity: 1;
//   .expand-year-plots & {
//     display: none;
//     opacity: 0;
//     transition:all $animation-rate ease;
//   }
// }

// grid layout
.cover {
  height: 100vh;
  width: 100vw;
  background: beige;
  text-align: center;
  span {
    display: inline-block;
    padding-top: 45vh;
    vertical-align: middle;
    font-size: 48px;
    font-weight: 900;
    opacity: 0.8;
  }
}
.explore {
  display: grid;
  padding: 10px;
  grid-template-areas: "a a";
  grid-gap: 10px;
  // grid-auto-columns: minmax(90px, 700px);
  grid-auto-columns: 70% 30%;
  // min-width: 1000px;
  position: relative;
  &.media-list-view {
    grid-auto-columns: 30% 70%;
    transition:all $animation-rate ease;
  }
  // smallest screens
  @media screen and (max-width: 500px) {
    padding: 100px 0 0 10px;
    &.media-list-view {
      grid-auto-columns: 60px auto;
      .media-list {
        // margin-right: -40px;
      }
    }
  }

}
.chart {
  position: sticky;
  justify-self: end;
  top: 10px;
  // height: 700px;
  display: grid;
  // grid-template-areas: "a a a a a a a a a";
  grid-gap: 2px;
  grid-auto-columns: minmax(60px, 90px);
  .media-list-view & {
    grid-auto-columns: minmax(30px, 40px);
  }
    @media screen and (max-width: $break-small) {
      grid-auto-columns: 10% 90%;

      .year-plot:not(.selected-year) {
        display: none;
      }
      .media-list .item {
        font-size: 18px;
      }
    }
}
.controls {
  // max-width: 800px;
  overflow: auto;
  height: 100vh;
  position: relative;

  // span {
  //   display: inline-block;
  //   height: 1000px;
  //   padding: 400px 0 900px 0;
  //   text-align: center;
  // }
}

// header
header {
  grid-column-start: 1;
	grid-column-end: 3;
  .title {
    float: left;
    font-family: 'IBM Plex Serif', Georgia, serif;
    font-weight: 300;
    font-size: 24px;
    color: $base-light;
    padding: 20px 0 0 30px;
  }
  .options {
    float: right;
  }
}
h1 {
  margin: 0 auto;
  color: $base-light;
  font-size: 24px;
  font-family: 'IBM Plex Serif', Georgia, serif;
  font-weight: 500px;
}

// radial progress
.progress-circle-container {
  // display: block;
  position: sticky;
  top: 40px;
  // left: 730px;
  width: 100px;
  margin-left: 740px;
  padding: 20px;
  background-color: rgba(17,17,17,0.6);
  z-index: 800;
}
.progress-circle {
  width:60px;
  height:60px;
  display: block;
  // z-index: 100;
  transform: rotate(-90deg);
  transition: all 0.3s ease;
  circle.progress-disk {
    transition: all 0.5s ease;
    opacity: 0.8;
    stroke: #fff;
    fill: rgba(57, 61, 60, 0.8);
  }
  .progress-year {
    transform: rotate(90deg);
    font-size: 10px;
    font-family: "IBM Plex Mono", monospace;
    fill: #fff;
  }
}

// scrollable media list
// offset for types of list items
$bookOffset: 10px;
$playOffset: 15px;
$movieOffset: 5px;
$tvOffset: 8px;
.media-list {
  position: relative;
  // margin-top: 40px;
  .year-nav {
    position: sticky;
    overflow: hidden;
    background: $base-dark;
    z-index: 100;
    width: 100%;
    top: 0;
    display: block;
    padding: 0 0 10px 10px;
    .year {
      font-family: "IBM Plex Mono", monospace;
      font-size: 14px;
      font-weight: 300;
      cursor: pointer;
      margin-right: 15px;
      color: rgba(246,245,241, 0.7);

    }
    & .selected {
      display: inline-block;
      color: $base-light;
      opacity: 1;
      border-bottom: 1px solid $base-light;
    }
  }
  // base media list item appearance
  $title-color: #3a3a3a;
  .item {
    position: relative;
    align-items: center;
    margin: 2px 15px 0 15px;
    padding: 17px 30px;
    background-color: #E8E3E0;
    font-size: 23px;
    .title {
      flex-grow: 1;
      font-family: 'IBM Plex Serif', Georgia, serif;
      font-weight: 500;
      color: $title-color;
    }
    .credit,
    .year {
      font-family: 'IBM Plex Serif', Georgia, serif;
      color: $title-color;
      opacity: 0.6;
      font-weight: 400;
    }
    .year {
      display: inline-block;
      float: right;
      margin-left: 10px; // buffer between title and year
    }
    &:hover {
      cursor: pointer;
    }
    @media screen and (max-width: $break-small) {
      font-size: 18px;
    }
  }
  // READ: books and plays
  .play,
  .book {
    max-width: 720px;
    // font-size: 23px;
    font-family: 'IBM Plex Serif', Georgia, serif;
    flex-direction: row;
    justify-content: flex-start;
    align-items: center;
    align-content: center;
    border-radius: 2px;
    .title,
    .credit {
      display: block;
      color: $title-color;
      flex-grow: 1;
      text-align: left;
    }
    .title {
      width: 100%;
    }
    .credit {
      // display: inline-block;
      // text-align: right;
      width: 100%;
      font-weight: 400;
      // opacity: 0.7;
      clear: left;
    }
  }
  .book {
    margin-left: $bookOffset;
  }
  .play {
    margin-left: $playOffset;
  }
  // SEEN: TV, movies, shorts
  .tv,
  .movie,
  .short {
    max-width: 720px;
    border-radius: 8px;
    background-color: $base-light;
    // font-size: 23px;
    .title,
    .year {
      font-family: 'IBM Plex Sans', Helvetica, sans-serif;
    }
    .title {
      font-weight: 500;
    }
  }
  .tv {
    text-align: center;
    margin-left: $tvOffset;
    // font-family: 'IBM Plex Sans', Helvetica, sans-serif;
    // font-weight: 300;
  }
  .movie {
    margin-left: $movieOffset;
  }
  .short {
    margin-left: $movieOffset;
  }
  // special items - usually filming starts on a Soderbergh project
  .special {
    max-width: 720px;
    font-size: 18px;
    text-align: center;
    background: transparent;
    .title {
      color: $base-light;

    }
    // display: table;
    // & .title {
    //   display: table-cell;
    //   vertical-align: middle;
    // }
  }
  $notesOffset: 760px;
  .notes {
    position: absolute;
    width: 100%;
    border-left: 2px solid #E8E3E0;
    color: #E8E3E0;
    padding: 10px 15px;
    top: 0px;
    // left: 760px;
    font-size: 16px;
    font-weight: 500;
    text-align: left;
    font-family: "IBM Plex Serif", Georgia, sans-serif;
    .notes-date {
      font-weight: 300;
      opacity: 0.7;
    }
  }
  .tv .notes {
      left: ($notesOffset - $tvOffset);
  }
  .movie .notes,
  .short .notes {
    left: ($notesOffset - $movieOffset);
  }
  .book .notes {
    left: ($notesOffset - $bookOffset);
  }
  .play .notes {
    left: ($notesOffset - $playOffset);
  }


  // list item highlight
  .tv,
  .movie,
  .book,
  .short,
  .play,
  .special {
    &.highlight {
      background-color: #474642;
      font-weight: bold;
      .title,
      .year,
      .credit {
        color: $base-dark;
      }
      .year,
      .credit {
        font-weight: 300;
      }
    }
  }
}


// year plots
.year-plot-group {
  transition: width 0.3s ease;
}

.year-plot {
  display: inline-block;
  width: 100px;
  vertical-align: top;
  padding-top: 5px;
  padding-bottom: 8px;
  transition:all $animation-rate ease;
  &.selected-year {
    // background-color: rgba(60,60,60, 0.4);
  }
  .expand-year-plots &.selected-year {
    background-color: transparent ;
  }

  &:nth-of-type(1) {
    // place month labels
    .daily-items::before {
      font-family: "IBM Plex Mono", monospace;
      position: absolute;
      top: 3px;
      left: -25px;
      color: $base-light;
      font-size: 10px;
      opacity: 0.4;
    }
    .daily-items:nth-of-type(1)::before {
      content: 'JAN';
    }
    .daily-items:nth-of-type(32)::before {
      content: 'FEB';
    }
    .daily-items:nth-of-type(60)::before {
      content: 'MAR';
    }
    .daily-items:nth-of-type(91)::before {
      content: 'APR';
    }
    .daily-items:nth-of-type(121)::before {
      content: 'MAY';
    }
    .daily-items:nth-of-type(152)::before {
      content: 'JUN';
    }
    .daily-items:nth-of-type(182)::before {
      content: 'JUL';
    }
    .daily-items:nth-of-type(213)::before {
      content: 'AUG';
    }
    .daily-items:nth-of-type(244)::before {
      content: 'SEP';
    }
    .daily-items:nth-of-type(274)::before {
      content: 'OCT';
    }
    .daily-items:nth-of-type(305)::before {
      content: 'NOV';
    }
    .daily-items:nth-of-type(335)::before {
      content: 'DEC';
    }
  }
}
.plot-year-label {
  display: block;
  overflow: hidden;
  font-family: 'IMB Plex Mono', sans-serif;
  font-size: 10px;
  font-weight: 500;
  margin: 0 0 8px 7px;
  color: $base-light;
  width: 12px;
  text-indent: -12px;
  text-align: right;
  opacity: 0.5;
  cursor: pointer;
  .selected-year & {
    opacity: 1;
  }
  .expand-year-plots &,
  .expand-year-plots .selected-year &,
  .selected-year & {
    width: 24px;
    text-indent: 0;
    opacity: 1;
  }
}

// year plot, highlighted title label
.highlighted-title-outer {
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0.8;
  .highlighted-title-inner {
    display: none;
    width: auto;
    margin-top: 20px;
    background-color: #211F1E;
    color: #fff;
    padding: 10px 15px;
    border-radius: 3px;
    .clear-highlight {
      display: inline-block;
      margin-left: 10px;
      font-size: 16px;
      font-weight: 300;
      cursor: pointer;
      opacity: 0.5;
    }
    .title-highlight & {
      display: table-cell;
    }
  }
}
// row of items per day in a year plot
.daily-items {
  list-style: none;
  font-family: 'IBM Plex Mono', monospace;
  font-size: 1px;
  line-height: 1px;
  margin: 0;
  padding-left: 8px;
  position: relative;
  transition: background-color 0.3s ease;
  &.odd-month,
  .expand-year-plots .selected-year &.odd-month {
    background-color: lighten($base-dark, 2%);
  }
  .selected-year &.odd-month {
    // background-color: transparent;
  }
  &.on-screen.odd-month,
  &.on-screen {
    background-color: rgba(232,227, 224, 0.25);
    transition: background-color 0.3s ease;
  }
  ul {
    margin: 0;
    padding: 0;
  }
  li {
    display: inline-block;
    margin: 0px 1px 1px 0;
    height: 1px;
    position: relative;
    cursor: pointer;
    padding: 0;
    background-color: #888;
    border-radius: 0px;
    text-indent: -99999px;
    transition: width 0.3s ease 4s;
    transition: background-color 0.3s ease;
    z-index: 10;
    .expand-year-plots &,
    .selected-year & {
      background-color: $base-light;
    }
    .title-highlight & {
      background-color: #666;
    }
    &:hover,
    &.highlight:hover {
      background-color: #E8E3E0;
      cursor: pointer;
    }
    &.short-title,
    &.medium-title,
    &.long-title {
      transition: width 0.3s ease 0.4s;
    }
    &.short-title {
      width: 5px;
    }
    &.medium-title {
      width: 7px;
    }
    &.long-title {
      width: 9px;
    }
    &.highlight {
      background-color: #E8E3E0;
      height: 1px;
      z-index: 1;
    }
    &.highlight::before {
      content: "";
      position: absolute;
      background-color: gold;
      opacity: 0.4;
      top: -8px;
      width: 17px;
      height: 17px;
      border-radius: 20px;
      z-index: -1;
      transition:all $animation-rate-fast ease;
    }
    &.short-title.highlight::before {
      left: -6px;
    }
    &.medium-title.highlight::before {
      left: -5px;
    }
    &.long-title.highlight::before {
      left: -4px;
    }
    // days with no entry
    &.empty-date {
      background-color: #bbb;
      width: 0px;
      height: 2px;
      margin-bottom: 0;
      margin-left: 1px;
    }
  }
}

// collapsed year plots (default)
.compact-years {
  transition: all 0.3 ease;
  .year-plot {
    width: 40px;
    transition: all 0.3s ease;
  }
  .plot-year-label {
    font-family: "IBM Plex Mono", monospace;
    font-size: 10px;
    transition: all $animation-rate ease;
  }
  .daily-items {
    position: relative;
  }
  .daily-items li {
    transition: width 0.3s ease 0.8s;
    &.short-title,
    &.medium-title,
    &.long-title {
      width: 2px;
      height: 1px;
      margin-right: 1px;
      transition: width 0.5s ease;
    }
    // circle highlight
    &.highlight {
      background-color: $base-light;
    }
    &.highlight::before {
      content: "";
      position: absolute;
      top: -6px;
      left: -6px;
      width: 14px;
      height: 14px;
      opacity: 0.2;
      border-radius: 20px;
      transition: all $animation-rate-fast ease;
      z-index: 2;
    }
  }
}
// display the title in a hover box of a year plot item
.selected-title-hover {
  position: absolute;
  top: 0;
  left: 20px;
  opacity: 0;
  padding: 10px 15px;
  background: $base-light;
  font-family: 'IBM Plex Sans', Helvetica, sans-serif;
  font-size: 16px;
  z-index: 1000;
  border-radius: 3px;
  // border: 2px solid rgba(0,0,0,0.1);
}

// the most-seen-read
.most-seen-read {
  text-align: left;
  display: none;
  opacity: 0;
  margin: -10px 0 20px 0;
  padding: 0 20px;
  list-style: none;
  overflow: auto;
  transition: all 3s ease;
  ul{
    margin-bottom: 20px;
  }
  li {
    display: inline-block;
    margin: 0;
    font-family: 'IBM Plex Sans', Helvetica, sans-serif;
    color: $base-light;
    font-size: 11px;
    text-decoration: none;
    padding: 3px 5px;
    // padding: none;
    // margin-right: 3px;
    // margin-bottom: 2px;
    border-radius: 2px;
    // background-color: darken(#96A8B0,48%);
    // background-color: #232221;
    &::after {
      // content: ",";
    }
    // &.clear-highlight {
    //   background: none;
    //   border: 1px solid #232221;
    // }
    &.highlight,
    &.highlight:hover {
      // background-color: $base-light;
      background-color: gold;
      color: #000;
    }
    &:hover {
      background: lighten(#232221, 5%);
      cursor: pointer;
    }
  }
  .top-title-type {
    display: inline-block;
    font-family: 'IBM Plex Sans', Helvetica, sans-serif;
    font-weight: 500;
    font-size: 11px;
    color: #fff;
    text-transform: uppercase;
    margin-bottom: 10px;
  }
  // &.show-buttons {
  //   transform: translateY(10px);
  //   // text-align: center;
  //   display: block;
  //   opacity: 1;
  //   transition: all $animation-rate ease 0.7;
  // }
}

// control button
.option-button {
  font-family: 'IBM Plex Sans', Helvetica, sans-serif;
  text-align: center;
  background-color: transparent;
  border: 1px solid darken(#DBDCD7, 30%);
  font-size: 12px;
  margin: 10px 10px 0 0;
  padding: 5px 6px;
  width: 45px;
  border-radius: 2px;
  color: #DBDCD7;
  outline: none;
  cursor: pointer;
}


/**
* Rangeslider
*/
.rangeslider {
  margin: 20px 0;
  position: relative;
  background: #e6e6e6;
  -ms-touch-action: none;
  touch-action: none;
  &,
  .rangeslider__fill {
    display: block;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.4);
  }
  .rangeslider__handle {
    background: $base-light;
    border: 1px solid #ccc;
    cursor: pointer;
    display: inline-block;
    position: absolute;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.4), 0 -1px 3px rgba(0, 0, 0, 0.4);
    .rangeslider__active {
      opacity: 1;
    }

  }

  .rangeslider__handle-tooltip {
    width: 40px;
    height: 40px;
    text-align: center;
    position: absolute;
    // background-color: rgba(0, 0, 0, 0.8);
    background-color: $base-light;
    font-weight: normal;
    font-size: 14px;
    transition: all 100ms ease-in;
    border-radius: 4px;
    display: inline-block;
    color: #111;
    right: 200;
    transform: translate3d(-50%, 0, 0);
    span {
      margin-top: 12px;
      display: inline-block;
      line-height: 100%;
    }
    &:after {
      content: ' ';
      position: absolute;
      width: 0;
      height: 0;
    }
  }
}

// range slider-vertical
.rangeslider-vertical {
  margin: 20px 10px;
  height: calc(100vh - 150px);
  max-width: 2px;
  background-color: #555;
  .rangeslider__fill,
  .rangeslider__handle {
    position: absolute;
  }
  .rangeslider__fill {
    width: 100%;
    background-color: $base-light;
    box-shadow: none;
    top: 0;
  }
  .rangeslider__handle {
    width: 40px;
    height: 40px;
    border-radius: 100%;
    left: -19px;
    border: 2px solid $base-light;
    box-shadow: none;
    background-color: #111;;
  }
  .rangeslider__handle-tooltip {
    left: -100%;
    top: 50%;
    transform: translate3d(-50%, -50%, 0);
    &:after {
      border-top: 8px solid transparent;
      border-bottom: 8px solid transparent;
      border-left: 8px solid rgba(0, 0, 0, 0.8);
      left: 100%;
      top: 12px;
    }
  }
  .rangeslider__handle-label {
    font-family: "IBM Plex Mono", monospace;
    text-align: center;
    word-break: normal;
    font-size: 12px;
    line-height: 1.0;
    padding-top: 7px;
    font-weight: 500;
    color: $base-light;
    text-transform: uppercase;
  }
  .rangeslider__handle-tooltip {

  }
}
.slider-vertical .value {
  display: none;
}
